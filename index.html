<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine‚Äôs First Time üíå</title>

<style>
*{box-sizing:border-box;font-family:"Prompt",system-ui,sans-serif}
body{
  margin:0;
  background:#b8001f;
  color:#fff;
  overflow-x:hidden;
  overflow-y:auto;
}
.screen{
  display:none;
  min-height:100vh;
  padding:20px;
  justify-content:center;
  align-items:center;
  text-align:center;
  flex-direction:column;
}
.screen.active{display:flex}

/* ---------- Opening ---------- */
h1{font-size:30px}
.bear{font-size:110px}
.envelope{
  font-size:60px;
  margin-top:10px;
  cursor:pointer;
  animation:bounce 1.5s infinite;
}
@keyframes bounce{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-10px)}
}

/* ---------- Envelope open ---------- */
.envelope-box{
  position:relative;
  width:280px;
  height:180px;
  background:#ffe0ea;
  border-radius:12px;
  padding-top:20px;
}
.item{
  background:#fff;
  border-radius:12px;
  padding:10px;
  margin:10px auto;
  width:90%;
  cursor:pointer;
  animation:slideUp .8s forwards;
}
@keyframes slideUp{
  from{opacity:0;transform:translateY(40px)}
  to{opacity:1;transform:translateY(0)}
}

/* ---------- Letter ---------- */
.letter{
  background:#fff6e5;
  color:#5a2a2a;
  padding:20px;
  border-radius:16px;
  max-width:420px;
  box-shadow:0 10px 30px rgba(0,0,0,.25);
}
.typing{
  min-height:120px;
  text-align:left;
}

/* ---------- Images ---------- */
.thumb{
  width:90px;
  border-radius:10px;
  margin:6px;
}
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.8);
  display:none;
  justify-content:center;
  align-items:center;
}
.modal img{
  max-width:90%;
  max-height:90%;
  border-radius:16px;
}

/* ---------- Game ---------- */
.game{
  position:relative;
  width:100%;
  max-width:420px;
  height:70vh;
  background:#ffdbe5;
  border-radius:20px;
  overflow:hidden;
  color:#7a0020;
}
.target{
  position:absolute;
  font-size:38px;
  cursor:pointer;
}
.crosshair{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-size:22px;
  pointer-events:none;
}
.hud{
  position:absolute;
  top:10px;
  width:100%;
  display:flex;
  justify-content:space-between;
  padding:0 14px;
  font-weight:bold;
}

/* ---------- Buttons ---------- */
.btn{
  margin-top:14px;
  padding:12px 26px;
  border:none;
  border-radius:999px;
  background:#ff4d6d;
  color:white;
  font-size:16px;
  cursor:pointer;
}
/* ---------- FPS upgrade ---------- */
.game{
  touch-action: none;
}
.target{
  position:absolute;
  font-size:34px;
  user-select:none;
  transition:transform .15s;
}
.target.hit{
  transform:scale(1.4);
}
.flash{
  position:absolute;
  inset:0;
  background:rgba(255,255,255,.25);
  animation:flash .1s;
  pointer-events:none;
}
@keyframes flash{
  from{opacity:1}to{opacity:0}
}

.reward-card{
  background:#fff;
  color:#b8001f;
  padding:24px;
  border-radius:20px;
  animation:pop .6s;
}
@keyframes pop{
  from{transform:scale(.7);opacity:0}
  to{transform:scale(1);opacity:1}
}

/* ---------- LETTER FOLD ---------- */
.letter{
  position:relative;
  overflow:hidden;
  cursor:pointer;
  transition:all .6s ease;
  max-height:70px;
}

.letter.fold{max-height:70px}
.letter.open{max-height:420px}

.letter-cover{
  position:absolute;
  inset:0;
  background:#fff6e5;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:bold;
  border-radius:16px;
  transition:opacity .4s;
}

.letter.open .letter-cover{
  opacity:0;
  pointer-events:none;
}

/* ---------- SCROLL REVEAL ---------- */
.reveal{
  opacity:0;
  transform:translateY(40px);
  transition:all .8s ease;
}

.reveal.show{
  opacity:1;
  transform:translateY(0);
}

/* ---------- TICKET GLOW ---------- */
.btn.ticket{
  background:linear-gradient(135deg,#ff4d6d,#ff8fa3);
  box-shadow:0 0 15px rgba(255,77,109,.8);
  animation:float 2s infinite ease-in-out, glow 1.5s infinite alternate;
}

@keyframes float{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-6px)}
}

@keyframes glow{
  from{box-shadow:0 0 10px #ff4d6d}
  to{box-shadow:0 0 25px #ff8fa3}
}

</style>
</head>

<body>

<!-- Audio -->
<audio id="openSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_9c8b2a9f6f.mp3"></audio>
<audio id="bgm" src="https://cdn.pixabay.com/audio/2022/10/09/audio_5f8c3e5f27.mp3" loop></audio>
<audio id="hitSound" src="https://cdn.pixabay.com/audio/2022/03/10/audio_6d3b7c6a8a.mp3"></audio>
<audio id="missSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_3a0c9e56e5.mp3"></audio>

<!-- SECTION 1 -->
<div class="screen active" id="s1">
  <h1>Valentine‚Äôs Day ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</h1>
  <p>‡∏°‡∏µ‡∏ö‡∏≤‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏ò‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏î‡∏π üíå</p>
  <div class="bear">üêª</div>
  <div class="envelope" onclick="openEnvelope()">‚úâÔ∏è</div>
  <small>‡∏Å‡∏î‡πÄ‡∏õ‡∏¥‡∏î‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢</small>
</div>

<!-- LANDING PAGE -->
<div class="screen" id="landing">

  <!-- üìú LETTER (fold‚Äìopen) -->
  <div class="letter fold reveal" onclick="toggleLetter()">
    <div class="letter-cover">üìú ‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢</div>
    <div class="typing" id="typing"></div>
  </div>

  <!-- üì∏ IMAGES -->
  <div class="reveal" style="margin:30px 0">
    <img class="thumb" src="https://via.placeholder.com/300" onclick="zoom(this.src)">
    <img class="thumb" src="https://via.placeholder.com/300" onclick="zoom(this.src)">
    <img class="thumb" src="https://via.placeholder.com/300" onclick="zoom(this.src)">
  </div>

  <!-- üéüÔ∏è GAME TICKET -->
  <div class="reveal">
    <button class="btn ticket" onclick="startGame()">
      üéüÔ∏è ‡∏ï‡∏±‡πã‡∏ß‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°
    </button>
  </div>

</div>

<div class="modal" id="modal" onclick="this.style.display='none'">
  <img id="modalImg">
</div>

<!-- GAME -->
<div class="screen" id="game">
  <div class="game">
    <div class="hud">
      <div id="score">üíò SCORE: 0</div>
      <div id="time">‚è∞ TIME: 30</div>
    </div>
    <div class="crosshair">‚ûï</div>
  </div>
  <button class="btn" onclick="exitGame()">‡∏≠‡∏≠‡∏Å‡πÄ‡∏Å‡∏°</button>
</div>

<!-- FAIL -->
<div class="screen" id="fail">
  <h2>‡πÅ‡∏û‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞ üòè</h2>
  <p>‡πÅ‡∏û‡πâ‡πÄ‡∏Å‡∏° ‡πÅ‡∏ï‡πà‡∏´‡πâ‡∏≤‡∏°‡πÅ‡∏û‡πâ‡πÉ‡∏à ‚ù§Ô∏è</p>
  <button class="btn" onclick="startGame()">‡∏Ç‡∏≠‡πÅ‡∏Å‡πâ‡∏ï‡∏±‡∏ß üò§</button>
  <button class="btn" onclick="go('reward')">‡∏¢‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡πÑ‡∏î‡πâ üò≥</button>
</div>

<!-- REWARD -->
<div class="screen" id="reward">
  <div class="reward-card">
    <h2>üéÅ ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏Ç‡∏≠‡∏á‡πÄ‡∏ò‡∏≠</h2>
    <p id="rewardText"></p>
    <button class="btn" onclick="saveReward()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ô‡∏µ‡πâ üíñ</button>
  </div>
</div>

<script>
/* ---------- Screen control ---------- */
const screens = document.querySelectorAll(".screen");

function go(id){
  screens.forEach(s => s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function zoom(src){
  document.getElementById("modalImg").src = src;
  document.getElementById("modal").style.display = "flex";
}

/* ---------- Typing Effect ---------- */
const text = `‡∏ß‡∏≤‡πÄ‡∏•‡∏ô‡πÑ‡∏ó‡∏ô‡πå‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤
‡πÄ‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ò‡∏≠‡∏¢‡∏¥‡πâ‡∏°‡πÑ‡∏î‡πâ
‡πÅ‡∏•‡∏∞‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‚Ä¶
‡πÄ‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡πÜ ‡πÄ‡∏™‡∏°‡∏≠ ‚ù§Ô∏è`;

let i = 0;
let typingTimer;

function typeText(){
  const el = document.getElementById("typing");
  el.innerHTML = "";
  i = 0;

  clearInterval(typingTimer);
  typingTimer = setInterval(()=>{
    el.innerHTML += text.charAt(i);
    i++;
    if(i >= text.length){
      clearInterval(typingTimer);
    }
  }, 40);
}
/* ---------- FPS GAME ---------- */
let score = 0;
let timeLeft = 30;
let gameTimer;
let spawnTimer;

const gameBox = document.querySelector(".game");
const scoreEl = document.getElementById("score");
const timeEl = document.getElementById("time");

function startGame(){
  go("game");
  score = 0;
  timeLeft = 30;
  scoreEl.innerText = "üíò SCORE: 0";
  timeEl.innerText = "‚è∞ TIME: 30";
  const flash = document.createElement("div");
  flash.className = "flash";
  gameBox.appendChild(flash);
  setTimeout(()=>flash.remove(),100);
  startTimer();
  spawnTarget();
}

function startTimer(){
  clearInterval(gameTimer);
  gameTimer = setInterval(()=>{
    timeLeft--;
    timeEl.innerText = `‚è∞ TIME: ${timeLeft}`;
    if(timeLeft <= 0){
      endGame();
    }
  },1000);
}

function spawnTarget(){
  clearInterval(spawnTimer);
  spawnTimer = setInterval(()=>{
    const t = document.createElement("div");
    t.className = "target";
    t.innerText = Math.random() > .3 ? "üíò" : "üß∏";
    t.style.left = Math.random()*80 + "%";
    t.style.top = Math.random()*80 + "%";

    t.onclick = e =>{
      e.stopPropagation();
      hit(t);
    };

    gameBox.appendChild(t);

    setTimeout(()=>t.remove(),1200);
  },700);
}

function hit(t){
  const hitSound = document.getElementById("hitSound");
  hitSound.currentTime = 0;
  hitSound.play();

  t.classList.add("hit");

  score += t.innerText === "üß∏" ? 20 : 10;
  scoreEl.innerText = `üíò SCORE: ${score}`;

  setTimeout(()=>t.remove(),100);

  if(score >= 100){
    winGame();
  }
}

gameBox.addEventListener("click", ()=>{
  const miss = document.getElementById("missSound");
  miss.currentTime = 0;
  miss.play();
});

function endGame(){
  clearInterval(gameTimer);
  clearInterval(spawnTimer);
  go("fail");
}

function winGame(){
  clearInterval(gameTimer);
  clearInterval(spawnTimer);
  go("reward");
  showReward();
}

</script>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script>
const rewards = [
  "üéß ‡πÇ‡∏ó‡∏£‡∏Ñ‡∏∏‡∏¢‡πÑ‡∏î‡πâ‡∏ô‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡∏´‡πâ‡∏≤‡∏°‡∏ß‡∏≤‡∏á‡∏™‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô",
  "üíå ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏ô‡πÑ‡∏î‡πâ 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á",
  "üòà ‡∏™‡∏±‡πà‡∏á‡πÄ‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ 1 ‡∏≠‡∏¢‡πà‡∏≤‡∏á",
  "üåô ‡∏Ñ‡∏∑‡∏ô‡∏ô‡∏µ‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏≠‡∏•‡∏à‡∏ô‡πÄ‡∏ò‡∏≠‡∏´‡∏•‡∏±‡∏ö",
  "üéÅ ‡∏à‡∏∞‡∏°‡∏µ‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡πÑ‡∏õ‡∏´‡∏≤‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô"
];

function showReward(){
  document.getElementById("rewardText").innerText =
    rewards[Math.floor(Math.random()*rewards.length)];
}

function saveReward(){
  html2canvas(document.querySelector(".reward-card")).then(canvas=>{
    const a = document.createElement("a");
    a.href = canvas.toDataURL();
    a.download = "valentine-reward.png";
    a.click();
  });
}

function exitGame(){
  clearInterval(gameTimer);
  clearInterval(spawnTimer);

  document.querySelectorAll(".target").forEach(t => t.remove());

  const bgm = document.getElementById("bgm");
  bgm.pause();
  bgm.currentTime = 0;

  go("landing");
}

  /* ---------- OPEN ENVELOPE ---------- */
function openEnvelope(){
  const openSound = document.getElementById("openSound");
  const bgm = document.getElementById("bgm");

  openSound.currentTime = 0;
  openSound.play();

  bgm.volume = 0.5;
  bgm.play();

  go("landing");
  revealNow();
}

/* ---------- LETTER TOGGLE ---------- */
let letterOpened = false;

function toggleLetter(){
  if(letterOpened) return;

  const letter = document.querySelector(".letter");
  letter.classList.remove("fold");
  letter.classList.add("open");
  typeText();

  letterOpened = true;
}

/* ---------- SCROLL REVEAL ---------- */
const reveals = document.querySelectorAll(".reveal");

window.addEventListener("scroll", ()=>{
  reveals.forEach(el=>{
    const top = el.getBoundingClientRect().top;
    if(top < window.innerHeight - 80){
      el.classList.add("show");
    }
  });
});

function revealNow(){
  document.querySelectorAll(".reveal").forEach(el=>{
    el.classList.add("show");
  });
}

</script>


</body>
</html>



